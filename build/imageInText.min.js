function ImageInText(e){function t(){var e=l.text,t=l.height,a=l.height,g=l.width,d=l.font,m=l.fontWeight,c=document.createElement("canvas"),f=document.createElement("canvas"),w=c.getContext("2d"),p=f.getContext("2d");t?g?a=i(w,g,e,d,m):(w.font=m+" "+a+"px "+d,g=w.measureText(e).width):(t=i(w,g,e,d,m),a=t),r||(n.style.width=g+"px",n.style.height=t+"px"),c.width=g,c.height=a,f.width=g,f.height=t,f.innerHTML="<h1>"+e+"</h1>",n.appendChild(f),w.textAlign="center",w.textBaseline="middle",w.font=m+" "+a+"px "+d,w.fillStyle="#000",w.fillText(e,g/2,a/2),p.drawImage(c,0,0,g,t),p.globalCompositeOperation="source-in",l.image?g>o.width||t>o.height?(p.fillStyle=p.createPattern(o,"repeat"),p.fillRect(0,0,g,t)):p.drawImage(o,0,0):(p.fillStyle="#000",p.fillRect(0,0,g,t)),l.bgImage&&(p.globalCompositeOperation="destination-over",g>h.width||t>h.height?(p.fillStyle=p.createPattern(h,"repeat"),p.fillRect(0,0,g,t)):p.drawImage(h,0,0))}function i(e,t,i,n,a){function o(){e.font=a+" "+r+"px "+n}function h(){return g>e.measureText(i).width}var r=1,g=.98*t;for(o();h();)r++,o();return r}var n,a,o,h,r,g,l={container:"iit-container",text:"Lorem ipsum",font:"fantasy",fontWeight:"normal",width:0,height:0,image:"",bgImage:""};if(e&&"object"==typeof e)for(g in e)e.hasOwnProperty(g)&&l.hasOwnProperty(g)&&typeof e[g]==typeof l[g]&&(l[g]=e[g]);n=document.getElementById(l.container),a=l.height||l.width,o=new Image,h=new Image,a||(r=n.getBoundingClientRect(),l.height=Math.round(r.height),l.width=Math.round(r.width),a=l.height&&l.width),n&&a&&(l.image?l.bgImage?(h.onload=function(){o.onload=t,o.src=l.image},h.src=l.bgImage):(o.onload=t,o.src=l.image):t())}